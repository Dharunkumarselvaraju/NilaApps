<div class="chart-container">
  <h3 class="chart-title">Course Progress Rate</h3>
  
  <!-- Legend -->
  <div class="legend">
    <div class="legend-item" *ngFor="let category of categories">
      <div class="legend-color" [style.background-color]="category.color"></div>
      <span class="legend-label">{{ category.label }}</span>
    </div>
  </div>

  <!-- Chart -->
  <div class="chart-content">
    <div class="chart" *ngIf="filteredData.length > 0">
      <div class="y-axis">
        <div class="y-axis-label" *ngFor="let value of [100, 80, 60, 40, 20, 0]">{{ value }}</div>
      </div>
      
      <div class="chart-bars">
        <div class="district-group" *ngFor="let district of filteredData; trackBy: trackByDistrict">
          <div class="bars">
            <div class="bar-group">              <div 
                class="bar"
                *ngFor="let category of categories; trackBy: trackByCategory"
                [style.height.%]="getDistrictValueForBar(district, category.key)"
                [style.background-color]="category.color"
                [title]="category.label + ': ' + getDistrictValue(district, category.key) + '%'"
                (mouseenter)="onBarHover($event, district, category)"
                (mouseleave)="onBarLeave()">
              </div>
            </div>
          </div>
          <div class="district-label">{{ getDistrictName(district.district) }}</div>
        </div>
      </div>
      
      <div class="x-axis-title">Districts</div>
    </div>    <div class="no-data" *ngIf="filteredData.length === 0">
      <p>No data available for the selected district.</p>
    </div>
  </div>

  <!-- Tooltip -->
  <div class="tooltip" 
       *ngIf="showTooltip && tooltipData"
       [style.left.px]="tooltipPosition.x"
       [style.top.px]="tooltipPosition.y">
    <div class="tooltip-header">
      <div class="tooltip-color" [style.background-color]="tooltipData.color"></div>
      <span class="tooltip-title">{{ tooltipData.district }}</span>
    </div>
    <div class="tooltip-content">
      <span class="tooltip-category">{{ tooltipData.category }}: </span>
      <span class="tooltip-value">{{ tooltipData.value }}%</span>
    </div>
  </div>
</div>
